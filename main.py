from models import Restaurant_manager # Î ÏÎ¿ÏƒÎ¿Ï‡Î®: Î§ÏÎ·ÏƒÎ¹Î¼Î¿Ï€Î¿Î¹Î¿ÏÎ¼Îµ Ï„Î¿ Î´Î¹ÎºÏŒ ÏƒÎ¿Ï… ÏŒÎ½Î¿Î¼Î± ÎºÎ»Î¬ÏƒÎ·Ï‚
import sys

# 1. Î”Î·Î¼Î¹Î¿Ï…ÏÎ³Î¯Î± Ï„Î¿Ï… Manager
manager = Restaurant_manager()

print("ğŸ½ï¸  TAVERNA MANAGER APP v1.0 ğŸ½ï¸")

# --- MAIN LOOP ---
while True:
    print("\n-------------------------")
    print("1ï¸âƒ£  ÎÎ­Î± ÎšÏÎ¬Ï„Î·ÏƒÎ·")
    print("2ï¸âƒ£  Î ÏÎ¿Î²Î¿Î»Î® Î ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚")
    print("3ï¸âƒ£  Î Î»Î·ÏÏ‰Î¼Î® & Tips")
    print("4ï¸âƒ£  ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ Î¤Î±Î¼ÎµÎ¯Î¿Ï… (Exit)")
    print("-------------------------")
    
    choice = input("ğŸ‘‰ Î•Ï€Î¯Î»ÎµÎ¾Îµ (1-4): ")

    if choice == "1":
        print("\nğŸ“ --- ÎÎ•Î‘ ÎšÎ¡Î‘Î¤Î—Î£Î— ---")
        name = input("ÎŒÎ½Î¿Î¼Î± Î ÎµÎ»Î¬Ï„Î·: ")
        # Î Î¡ÎŸÎ£ÎŸÎ§Î—: Î¤Î¿ input ÎµÏ€Î¹ÏƒÏ„ÏÎ­Ï†ÎµÎ¹ ÎºÎµÎ¯Î¼ÎµÎ½Î¿, Ï€ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï„Î¿ ÎºÎ¬Î½Î¿Ï…Î¼Îµ Î±ÏÎ¹Î¸Î¼ÏŒ (int)
        try:
            people = int(input("Î‘ÏÎ¹Î¸Î¼ÏŒÏ‚ Î‘Ï„ÏŒÎ¼Ï‰Î½: "))
            table = int(input("Î¤ÏÎ±Ï€Î­Î¶Î¹: "))
        except ValueError:
            print("âŒ Î›Î¬Î¸Î¿Ï‚! Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Î´ÏÏƒÎµÎ¹Ï‚ Î±ÏÎ¹Î¸Î¼ÏŒ ÏƒÏ„Î± Î¬Ï„Î¿Î¼Î± ÎºÎ±Î¹ Ï„Î¿ Ï„ÏÎ±Ï€Î­Î¶Î¹.")
            continue # ÎÎ±Î½Î±Ï€Î¬ÎµÎ¹ ÏƒÏ„Î·Î½ Î±ÏÏ‡Î® Ï„Î¿Ï… loop
            
        time = input("ÎÏÎ±: ")
        notes = input("Î£Î·Î¼ÎµÎ¹ÏÏƒÎµÎ¹Ï‚: ")
        
        manager.add_reservation(name, people, time, table, notes)

    elif choice == "2":
        manager.show_daily_schedule()

    elif choice == "3":
        print("\nğŸ’¸ --- Î Î›Î—Î¡Î©ÎœÎ— ---")
        search = input("Î”ÏÏƒÎµ ÏŒÎ½Î¿Î¼Î± Ï€ÎµÎ»Î¬Ï„Î· Î³Î¹Î± Î±Î½Î±Î¶Î®Ï„Î·ÏƒÎ·: ")
        
        # ÎšÎ±Î»Î¿ÏÎ¼Îµ Ï„Î· Î´Î¹ÎºÎ® ÏƒÎ¿Ï… ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ·
        res = manager.find_reservation_by_name(search)
        
        if res:
            print(f"âœ… Î’ÏÎ­Î¸Î·ÎºÎµ: {res.customer_name} (Î¤ÏÎ±Ï€Î­Î¶Î¹ {res.table_id})")
            try:
                amount = float(input("Î ÏŒÏƒÎ± ÎµÏ…ÏÏ tips Î¬Ï†Î·ÏƒÎ±Î½; "))
                res.add_tips(amount)
            except ValueError:
                print("âŒ Î Î±ÏÎ±ÎºÎ±Î»Ï Î´ÏÏƒÎµ Î­Î³ÎºÏ…ÏÎ¿ Ï€Î¿ÏƒÏŒ (Ï€.Ï‡. 5.50).")
        else:
            print("âŒ Î”ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Ï€ÎµÎ»Î¬Ï„Î·Ï‚ Î¼Îµ Î±Ï…Ï„ÏŒ Ï„Î¿ ÏŒÎ½Î¿Î¼Î±.")

    elif choice == "4":
        print("\nğŸ’° --- Î¤Î‘ÎœÎ•Î™ÎŸ Î—ÎœÎ•Î¡Î‘Î£ ---")
        manager.tips_process() # Î— ÏƒÏ…Î½Î¬ÏÏ„Î·ÏƒÎ· Ï€Î¿Ï… Î­Ï†Ï„Î¹Î±Î¾ÎµÏ‚ Î³Î¹Î± Ï„Î± Ï€Î¿ÏƒÎ¿ÏƒÏ„Î¬
        print("ğŸ‘‹ ÎšÎ±Î»ÏŒ Î²ÏÎ¬Î´Ï…!")
        break # Î¤ÎµÏÎ¼Î±Ï„Î¹ÏƒÎ¼ÏŒÏ‚ Ï€ÏÎ¿Î³ÏÎ¬Î¼Î¼Î±Ï„Î¿Ï‚

    else:
        print("âš ï¸ ÎœÎ· Î­Î³ÎºÏ…ÏÎ· ÎµÏ€Î¹Î»Î¿Î³Î®.")